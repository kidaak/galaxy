{"version":3,"file":"workflow-node.js","sources":["../../../src/mvc/workflow/workflow-node.js"],"names":["define","NodeView","Node","Backbone","Model","extend","initialize","app","attr","this","element","input_terminals","output_terminals","tool_errors","workflow_outputs","getWorkflowOutput","outputName","_","findWhere","output_name","isWorkflowOutput","undefined","removeWorkflowOutput","splice","addWorkflowOutput","push","connectedOutputTerminals","_connectedTerminals","terminals","connectedTerminals","$","each","t","connectors","length","hasConnectedOutputTerminals","outputTerminals","connectedMappedInputTerminals","_connectedMappedTerminals","hasConnectedMappedInputTerminals","inputTerminals","inputName","inputTerminal","isMappedOver","mapped_outputs","mapOver","isCollection","mappedInputTerminals","_mappedTerminals","mappedTerminals","hasMappedOverInputTerminals","found","redraw","destroy","k","workflow","remove_node","remove","make_active","addClass","make_inactive","get","p","removeChild","appendChild","parentNode","removeClass","setLabel","label","updateNodeLabel","init_field_data","data","type","name","form_html","tool_state","tooltip","annotation","post_job_actions","uuid","node","nodeView","el","data_inputs","i","input","addDataInput","data_outputs","addRule","output","addDataOutput","render","node_changed","update_field_data","pja_in","parseJSON","renderToolErrors","old_body","new_body","newInputsDiv","newTerminalViews","terminalView","difference","values","terminalViews","unusedView","terminal","updateDataOutput","replaceWith","markChanged","error","text","b","find","tmp","html"],"mappings":"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"}